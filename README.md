# 수화해듀오

## 프로젝트 요약

#### 연구 개발 목표

```
청각장애인은 소리를 듣지 못하고 정상적인 언어 구사가 불가능하기 때문에 일반인과의 원활한 의사소통이 어렵다. 물론 텍스트를 통한 의사전달이 가능하겠지만 이는 텍스트를 입력하고 보여주는 시간으로 인한 지연과 일대일이 아닌 다수와의 소통이 어렵다는 점에서 불편함이 존재한다.

또한 특별한 행사나 비즈니스가 있지 않은 이상 일상적인 의사소통에 매번 수화통역사를 동반하기도 어렵다. 더군다나 수화통역사는 무료 자원봉사자의 수가 청각장애인들의 수요에 비해 턱없이 부족할 뿐만 아니라 전문 수화통역사의 경우는 그 수당이 상당하여 부담이 될 수 밖에 없다. 

‘수화해듀오’는 이러한 청각장애인들의 불편함을 해소하기 위해 청각장애인을 위한 실시간 수화 통역사 매칭을 통한 수화 통역 서비스를
개발하게 되었다.
```



#### 연구 개발 내용

````
‘수화해듀오’는 청각장애인이 수화 통역이 필요할 때 수화 통역사를 매칭하여 영상 통화를 통한 실시간 수화 통역 서비스를 제공한다. ‘수화해듀오’가 제공하는 서비스는 크게 다음 3가지가 있다.

첫째, 청각장애인이 급하게 수화 통역이 필요할 때 실시간으로 수화통역사에게 푸시 알람을 전송하여 수화 통역 서비스를 제공해 줄 수화 통역사를 매칭해주는 실시간 매칭 서비스이다.

둘째, 청각장애인이 행사나 약속이 있을 때 게시판에 통역 요청글을 작성함으로써 수화가 필요한 시간에 수화 통역 서비스를 제공해 줄 수화통역사를 미리 매칭해주는 예약 매칭 서비스이다.

셋째, 청각장애인이 아주 간단한 의사소통을 할 시에 수화통역사를 매칭받지 않고도 어플리케이션 자체에서 제공하는 수화 통역 알고리즘을 통한 수화 통역 서비스를 받는 간단 수화 통역 서비스이다. 이 서비스를 통해 사용자는 간단한 수화 동작들을 인식시켜 통역을 받음으로써 수화 동작 연습을 할 수도 있다.
````



#### 핵심 기술 요소

```
‘수화해듀오’는 FCM(Firebase Cloud Messaging)을 통해 청각장애인과 수화통역사의 매칭 신청과 수락에 대한 푸시 알람을 전송하여 실시간 또는 예약 매칭을 진행한다. 매칭된 정보는 Retrofit2를 통해 서버와 통신하여 데이터베이스에 저장된다.

실시간 수화 통역은 청각장애인과 수화통역사의 영상 통화를 통해 이루어지는데, 영상 통화는 Web RTC 기술을 통해 안드로이드 앱 간의 Real-Time Communication을 구현하였다.

간단 수화 통역은 Kinect를 통해 사용자의 수화를 인식하여 데이터의 좌표 정규화를 거쳐 수화를 통역하도록 한다.
```



## 컴포넌트 설계도

- ‘수화해듀오’는 사용자가 사용하는 클라이언트인 Android application과 어플리케이션 구동에 필요한 Application Server가 존재한다.

- Android는 사용자가 회원가입 또는 로그인 할 때 사용자 계정의 Authentication을 위해 FirebaseAuth 객체를 생성하여 Firebase Server와 직접 통신한다.
- Android 동작 상에서 데이터베이스 접근이나 푸시 알람 전송, 포인트 결제 등이 필요할 때 NginX 안에 포함된 Laravel Framework의 PHP와 통신하게 된다. 
  - 이 때 Retrofit2 API를 이용한 RESTful 방식의 통신이 이루어진다. 
  - 데이터베이스에 접근 할 경우 MySQL 서버와 연결되게 되고, 푸시 알람 전송의 경우
    PHP 상에서 FCM 서버, 즉 Firebase Server로의 데이터 전송이 이루어지게 된다.



#### FCM(Firebase Cloud Messaging)

- Firebase에서 제공하는 교차 플랫폼 메시징 솔루션
- ‘수화해듀오’에서 청각장애인과 수화통역사 사이에 매칭 신청과 매칭 수락에 대한 알람을 제공하기 위해 활용된다.
- FCM은 메시지 송수신을 위한 두가지 구성 요소가 필요하다. 메시지를 작성, 타겟팅, 전송할 수 있는 어플리케이션 서버와 메시지를 수신하여 처리하는 클라이언트 앱이다. 
- 여기서 클라이언트 앱은 ‘수화해듀오’의 경우 수신자의 안드로이드 어플리케이션이 될 것이다.
  1. 사용자가 안드로이드 어플리케이션 상에서 메시지 텍스트를 작성하여 전송 버튼을 클릭하게 되면 메시지 텍스트는 어플리케이션 서버로 전달된다. 
  2. 어플리케이션 서버는 데이터베이스를 통해 메시지를 보낼 상대의 디바이스 토큰 값을 받아 옴으로써 타겟팅을 하고 이러한 정보들을 JSON 형태로 저장하여 CURL 방식으로 FCM 서버로 전송한다.
  3. FCM 서버가 어플리케이션 서버로부터 메시지를 전달받으면 FCM은 각 클라이언트 앱에 메시지를 전송하게 된다. 이 때 어플리케이션 서버는 알림메시지 유형에 Data Payload를 추가해서 보내기 때문에 FCM 서버가 직접 Data Payload의 Key-Value 쌍(각 디바이스 토큰 값들과 매칭 신청 또는 수락에 대한 정보들을 담은 데이터)을 분류하여 각 클라이언트 앱에 전송해준다.
  4. 각 클라이언트 앱은 메시지를 전송 받으면 앱이 백그라운드 상태일 경우 알림 메시지를 알림 목록으로 전송하고, 포그라운드 상태일 경우 onMessageReceived() 콜백이 메시지를 처리하여 사용자에게 푸시 알람을 띄워주게 된다.



#### 수화인식을 위한 좌표 정규화 알고리즘

- 모든 사람은 체형이 다르고, 같은 동작을 수행해도 다른 시간이 소요된다. 하지만 수화인식은 같은 시점에서 관절좌표의 상대적인 차이를 비교하여 인식하기 때문에 수화 동작을 정규화하는 과정이 필요하다. 

- 이와 같은 정규화를 위해서 길이 정규화와 높이 정규화, 2가지의 정규화 과정을 거쳤다.

  1. 길이 정규화

     사람마다 다른 수화 동작시간을 정규화해주는 과정이다. Kinect가 1초에 30fps의 좌표값 추출을 지원하고 수화 한 동작을 수행하는데 2~3초 정도 소요된다고 판단하여 80fps으로 정규화하는 과정을 거쳤다.

  2. 높이 정규화

     모든 사람은 체형이 다르기 때문에 고정된 카메라에 비춰지는 모습을 기준으로 수화를 할 경우 추출되는 관절좌표값에 차이가 생기게 된다. 이와 같은 체형간의 차이를 최소화 하기위해 수화자가 시작지점에 손을 올리고 수화를 시작하는 시점의 어깨값 좌표를 추출하여 기존 수화 데이터에 존재하는 어깨값 좌표와의 차이값을 계산하여 나머지 관절 좌표값에 반영해준다.
# 수화해듀오

## 프로젝트 요약

#### 연구 개발 목표

```
청각장애인은 소리를 듣지 못하고 정상적인 언어 구사가 불가능하기 때문에 일반인과의 원활한 의사소통이 어렵다. 물론 텍스트를 통한 의사전달이 가능하겠지만 이는 텍스트를 입력하고 보여주는 시간으로 인한 지연과 일대일이 아닌 다수와의 소통이 어렵다는 점에서 불편함이 존재한다.

또한 특별한 행사나 비즈니스가 있지 않은 이상 일상적인 의사소통에 매번 수화통역사를 동반하기도 어렵다. 더군다나 수화통역사는 무료 자원봉사자의 수가 청각장애인들의 수요에 비해 턱없이 부족할 뿐만 아니라 전문 수화통역사의 경우는 그 수당이 상당하여 부담이 될 수 밖에 없다. 

‘수화해듀오’는 이러한 청각장애인들의 불편함을 해소하기 위해 청각장애인을 위한 실시간 수화 통역사 매칭을 통한 수화 통역 서비스를
개발하게 되었다.
```



#### 연구 개발 내용

````
‘수화해듀오’는 청각장애인이 수화 통역이 필요할 때 수화 통역사를 매칭하여 영상 통화를 통한 실시간 수화 통역 서비스를 제공한다. ‘수화해듀오’가 제공하는 서비스는 크게 다음 3가지가 있다.

첫째, 청각장애인이 급하게 수화 통역이 필요할 때 실시간으로 수화통역사에게 푸시 알람을 전송하여 수화 통역 서비스를 제공해 줄 수화 통역사를 매칭해주는 실시간 매칭 서비스이다.

둘째, 청각장애인이 행사나 약속이 있을 때 게시판에 통역 요청글을 작성함으로써 수화가 필요한 시간에 수화 통역 서비스를 제공해 줄 수화통역사를 미리 매칭해주는 예약 매칭 서비스이다.

셋째, 청각장애인이 아주 간단한 의사소통을 할 시에 수화통역사를 매칭받지 않고도 어플리케이션 자체에서 제공하는 수화 통역 알고리즘을 통한 수화 통역 서비스를 받는 간단 수화 통역 서비스이다. 이 서비스를 통해 사용자는 간단한 수화 동작들을 인식시켜 통역을 받음으로써 수화 동작 연습을 할 수도 있다.
````



#### 핵심 기술 요소

```
‘수화해듀오’는 FCM(Firebase Cloud Messaging)을 통해 청각장애인과 수화통역사의 매칭 신청과 수락에 대한 푸시 알람을 전송하여 실시간 또는 예약 매칭을 진행한다. 매칭된 정보는 Retrofit2를 통해 서버와 통신하여 데이터베이스에 저장된다.

실시간 수화 통역은 청각장애인과 수화통역사의 영상 통화를 통해 이루어지는데, 영상 통화는 Web RTC 기술을 통해 안드로이드 앱 간의 Real-Time Communication을 구현하였다.

간단 수화 통역은 Kinect를 통해 사용자의 수화를 인식하여 데이터의 좌표 정규화를 거쳐 수화를 통역하도록 한다.
```



## 컴포넌트 설계도

- ‘수화해듀오’는 사용자가 사용하는 클라이언트인 Android application과 어플리케이션 구동에 필요한 Application Server가 존재한다.

- Android는 사용자가 회원가입 또는 로그인 할 때 사용자 계정의 Authentication을 위해 FirebaseAuth 객체를 생성하여 Firebase Server와 직접 통신한다.
- Android 동작 상에서 데이터베이스 접근이나 푸시 알람 전송, 포인트 결제 등이 필요할 때 NginX 안에 포함된 Laravel Framework의 PHP와 통신하게 된다. 
  - 이 때 Retrofit2 API를 이용한 RESTful 방식의 통신이 이루어진다. 
  - 데이터베이스에 접근 할 경우 MySQL 서버와 연결되게 되고, 푸시 알람 전송의 경우
    PHP 상에서 FCM 서버, 즉 Firebase Server로의 데이터 전송이 이루어지게 된다.



#### FCM(Firebase Cloud Messaging)

- Firebase에서 제공하는 교차 플랫폼 메시징 솔루션
- ‘수화해듀오’에서 청각장애인과 수화통역사 사이에 매칭 신청과 매칭 수락에 대한 알람을 제공하기 위해 활용된다.
- FCM은 메시지 송수신을 위한 두가지 구성 요소가 필요하다. 메시지를 작성, 타겟팅, 전송할 수 있는 어플리케이션 서버와 메시지를 수신하여 처리하는 클라이언트 앱이다. 
- 여기서 클라이언트 앱은 ‘수화해듀오’의 경우 수신자의 안드로이드 어플리케이션이 될 것이다.
  1. 사용자가 안드로이드 어플리케이션 상에서 메시지 텍스트를 작성하여 전송 버튼을 클릭하게 되면 메시지 텍스트는 어플리케이션 서버로 전달된다. 
  2. 어플리케이션 서버는 데이터베이스를 통해 메시지를 보낼 상대의 디바이스 토큰 값을 받아 옴으로써 타겟팅을 하고 이러한 정보들을 JSON 형태로 저장하여 CURL 방식으로 FCM 서버로 전송한다.
  3. FCM 서버가 어플리케이션 서버로부터 메시지를 전달받으면 FCM은 각 클라이언트 앱에 메시지를 전송하게 된다. 이 때 어플리케이션 서버는 알림메시지 유형에 Data Payload를 추가해서 보내기 때문에 FCM 서버가 직접 Data Payload의 Key-Value 쌍(각 디바이스 토큰 값들과 매칭 신청 또는 수락에 대한 정보들을 담은 데이터)을 분류하여 각 클라이언트 앱에 전송해준다.
  4. 각 클라이언트 앱은 메시지를 전송 받으면 앱이 백그라운드 상태일 경우 알림 메시지를 알림 목록으로 전송하고, 포그라운드 상태일 경우 onMessageReceived() 콜백이 메시지를 처리하여 사용자에게 푸시 알람을 띄워주게 된다.



#### 수화인식을 위한 좌표 정규화 알고리즘

- 모든 사람은 체형이 다르고, 같은 동작을 수행해도 다른 시간이 소요된다. 하지만 수화인식은 같은 시점에서 관절좌표의 상대적인 차이를 비교하여 인식하기 때문에 수화 동작을 정규화하는 과정이 필요하다. 

- 이와 같은 정규화를 위해서 길이 정규화와 높이 정규화, 2가지의 정규화 과정을 거쳤다.

  1. 길이 정규화

     사람마다 다른 수화 동작시간을 정규화해주는 과정이다. Kinect가 1초에 30fps의 좌표값 추출을 지원하고 수화 한 동작을 수행하는데 2~3초 정도 소요된다고 판단하여 80fps으로 정규화하는 과정을 거쳤다.

  2. 높이 정규화

     모든 사람은 체형이 다르기 때문에 고정된 카메라에 비춰지는 모습을 기준으로 수화를 할 경우 추출되는 관절좌표값에 차이가 생기게 된다. 이와 같은 체형간의 차이를 최소화 하기위해 수화자가 시작지점에 손을 올리고 수화를 시작하는 시점의 어깨값 좌표를 추출하여 기존 수화 데이터에 존재하는 어깨값 좌표와의 차이값을 계산하여 나머지 관절 좌표값에 반영해준다.
